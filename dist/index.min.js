!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var s=t();for(var r in s)("object"==typeof exports?exports:e)[r]=s[r]}}(global,(()=>(()=>{"use strict";var e={d:(t,s)=>{for(var r in s)e.o(s,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:s[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{ExpressWebAdaptor:()=>o});const s=require("@electra/web");class r{constructor(e){this.request=e}cookies(){return{getAll:()=>this.request.cookies,get:e=>this.request.cookies[e],has:e=>!!this.request.cookies[e]}}routeParams(){return{getAll:()=>this.request.params,get:e=>this.request.params[e],has:e=>!!this.request.params[e]}}queryParams(){return{getAll:()=>this.request.query,get:e=>this.request.query[e],has:e=>!!this.request.query[e]}}getBody(){return this.request.body}getHost(){return this.request.hostname}getHostname(){return this.request.hostname}getIp(){return this.request.ip}getPath(){return this.request.path}getProtocol(){return this.request.protocol}getHeader(e){return this.request.get(e)}isSecure(){return this.request.secure}get(e){return(this.request.electra||{})[e]}set(e,t){return this.request.electra||(this.request.electra={}),this.request.electra[e]=t,this}}class n{constructor(e){this.response=e}headers(){const e={get:e=>this.response.get(e),set:(t,s)=>(this.response.set(t,s),e)};return e}setCookie(e,t,s){this.response.cookie(e,t,s)}download(e,t){return new Promise(((s,r)=>{const n=null==t?void 0:t.filename;null==t||delete t.filename,this.response.download(e,n,t||{},(e=>e?r(e):s()))}))}end(){this.response.end()}json(e){this.response.json(e)}redirect(e,t){if("number"==typeof e&&"string"==typeof t)this.response.redirect(e,t);else{if("string"!=typeof e||void 0!==t)throw new Error("Invalid redirect parameters");this.response.redirect(e)}}send(e){this.response.send(e)}sendFile(e,t){this.response.sendFile(e,t)}setStatus(e){return this.response.status(e),this}}class o{middleware(e){return 4===e.length?(t,o,i,u)=>e(t,new s.Request(new r(o)),new s.Response(new n(i)),u):(t,o,i)=>e(new s.Request(new r(t)),new s.Response(new n(o)),i)}route(e){return 3===e.length?(t,o,i)=>{e(new s.Request(new r(t)),new s.Response(new n(o)),i)}:(t,o)=>{e(new s.Request(new r(t)),new s.Response(new n(o)))}}endpoint(e){return this.route(((t,r,n)=>{return o=this,i=void 0,a=function*(){try{const n=new e(Object.assign({},t.routeParams().getAll(),t.queryParams().getAll(),t.getBody()),t,r),o=yield n.execute();return o instanceof s.Response?o.send():null==o||"object"!=typeof o&&!Array.isArray(o)?r.send(o):r.json(o)}catch(e){n(e)}},new((u=void 0)||(u=Promise))((function(e,t){function s(e){try{n(a.next(e))}catch(e){t(e)}}function r(e){try{n(a.throw(e))}catch(e){t(e)}}function n(t){var n;t.done?e(t.value):(n=t.value,n instanceof u?n:new u((function(e){e(n)}))).then(s,r)}n((a=a.apply(o,i||[])).next())}));var o,i,u,a}))}}return t})()));